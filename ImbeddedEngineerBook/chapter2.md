# 마이크로 컴퓨터 하드웨어

### 임베디드 마이크로 컴퓨터의 구성
- 마이크로컴퓨터
    - ROM(Read Only Memory) : 마이크로컴퓨터에 부여하는 절차가 저장된다. (프로그램이 하드디스크에 저장된다.)
    - RAM(Random Access Memory) : 마이크로컴퓨터가 절차를 실행하 기 위해 일시적으로 메모장처럼 사용하는 메모리.

- 버스
    - 메인버스
        - 주소버스
        - 데이터버스 
        - 컨트롤버스
    - 로컬버스
    - 브리지 
        - 메인버스와 로컬버스를 연결하는 컨트롤러
        - UART
        - I2C
        - SPI
    - 주변장치
        - DMA 컨트롤러
            - 일반적으로는 CPU가 Read/Write를 시행한다. 이를 PIO(Programmed I/O)라고 부른다.
            - Direct Memory Access 장치를 통해 메모리를 읽고 쓰는 도중에도 CPU가 일을 할 수 있다. 
            - 단점, 데이터를 메모리에 전송하는 동안에는 버스를 점유하므로 메모리 엑세스가 느려지는 일도 있다.
        - 타이머 
            - 프로그램에서 주기적으로 주변장치를 감시하거나, 주기적으로 데이터를 출력.
            - 카운터라고 부르는 레지스터에 주기 시간을 설정한다. 주기 시간이 경고되면 처리 중간에 끼어들어(인터럽트) 그 사실을 CPU에 통지한다. 
        - RTC(Real Time Clock)
            - 시간을 한번 설정해 두면 전원이 켜 있는 동안은 매초 시간이 갱신된다.
        - GPIO(General Purpose Input/Output)
            - CPU가 외부로부터의 입력 및 출력을 범용으로 처리할 수 있는 포트다. 
        - 주변장치의 제어방식
            - Memory Mapped I/O
                - 입출력 장치를 액세스할 때, 입출력과 메모리의 주소 공간을 분리하지 않고 하나의 메모리 공간에 취급하여 배치하는 방식.
                - 메모리와 I/O가 연속된 어드레스 영역에 할당되기 때문에 I/O가 차지하는 만큼 메모리 용량은 감소한다.
                - CPU의 입장에서는 메모리와 I/O가 동일한 외부기기로 간주되므로 이들을 액세스하기 위한 제어신호는(read)와(write) 신호뿐이다.
                - 소프트웨어적으로도 메모리에 대한 데이터의 액세스나 I/O에 대한 데이터의 입출력이 동일한 것으로 간주되므로 load나 store 명령에 의해 수행된다.
            - I/O Mapped I/O
                - 메모리와 입출력의 주소 공간을 분리하여 접근 하는 방식
                - 메모리와 I/O가 별개의 어드레스 영역에 할당되기 때문에 I/O를 사용하더라도 메모리 용량은 감소하지 않는다.
                - CPU의 입장에서는 메모리와 I/O 구분하여 취급해야 하므로, 이들을 액세스하기 위한 제어신호는 (read)와(write) 신호 이외에(memory request)나(I/O request) 등과 같은 구분신호가 필요하다.

### CPU란
- 주변장치
    - PC(program counter)
        - 메모리에서 다음에 실행해야할 명령의 위치를 저장하고 CPU에 전달하는 장치.
    - 디코더 
        - 명령의 의미를 해독한다. 
        - 파악한 명령에 따라 ALU에서의 연산이나 데이터의 이동을 지시한다. 
    - ALU
        - 사칙연산이나 논리연산과 같은 것들을 실행하는 하드웨어 회로다.  
    - 범용 레지스터
        - 고속이지만, 숫자 하나 값을 저장할 수 있는 작은 용량의 메모리다. 
        - ALU에서의 연산을 위해 임시로 값을 저장하거나, 데이터 이동을 위한 보관소로 이용된다. 
    - 시스템 레지스터 
        - CPU가 명령을 실행할 떄에 이용하는 레지스터. 
        - 명령 레지스터
        - 주소 레지스터 
        - 상태 레지스터 : CPU의 상태를 관리한다. 
- 명령 실행
    1. fetch
    2. decode 
    3. execute
    4. write back