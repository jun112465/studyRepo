## Socket이란?
- 소켓은 일반적으로 호스트간의 통신을 위한 도구이다.
- 네트워크 상에서의 소켓은 BSD UNIX에서 개발한 네트워크 프로그래밍 인터페이스이다.
- 네트워크 통신을 하려면 각 **TCP/IP 계층**의 협력을 통해서 이루어진다.
- 소켓은 **Application Layer**와 **Transport Layer** 사이에 있는 인터페이스이다.
- 통신의 시작점과 종료점. 엔드포인트라고 볼 수 있다.
- 우리는 소켓을 이용해 TCP나 UDP에 접근할 수 있다.

## 소켓의 구성요소
- 프로토콜
    - TCP/IP
        - 연결 설정 후 통신이 가능한 **연결형 프로토콜**
        - 신뢰성 있는 데이터 전송의 특징을 가지고 있다.
        - 데이터 경계의 구분이 없는 Byte-Stream 서비스이다.
    - UDP/IP
        - 연결 설정 없이 통신이 가능한 **비연결형 프로토콜**
        - TCP에 비해 신뢰성이 떨어지는 데이터 전송의 특징을 가지고있다.
        - 데이터의 경계를 구분하는 데이터그램 서비스이다.
- IP address
- 포트번호

## 소켓의 본질은 파일이다.
- File Discriptor (Unix, Linux)
    - 운영체제가 특정 파일에 할당해준 정수값
    - 운영체제가 파일에 접근하기 쉽게 번호로 추상화
    - 표준입출력 역시 fd(file discriptor)값이 할당돼 있음
        - stdin (표준입력) : 0
        - stdout (표준출력) : 1
        - stderr (표준에러) : 2
        - 사용자는 3이상부터 fd값을 할당받을 수 있음
- 소켓 또한 파일이다
    - 네트워크를 포함한 모든 UNIX I/O 디바이스는 파일이다. 
    - 소켓 역시 네트워크 상의 **다른 프로세스**와 통신하는 역할을 하는 파일이다.
    - 통신 시 소켓파일에 대한 입출력을 통해 응용계층으로 데이터가 넘어가지고 받아지는 것이다.

## 소켓 통신 flow
![image](https://velog.velcdn.com/images/newdana01/post/817b8ba8-4428-4e66-8128-7c01b554f8ff/image.png)
- 서버
    1. socket() 함수를 이용하여 소켓을 생성
    2. bind() 함수로 ip와 port 번호를 설정
    3. listen() 함수로 클라이언트의 접근 요청에 수신 대기열을 만들어 몇 개의 클라이언트를 대기 시킬지 결정
    4. accept() 함수를 사용하여 클라이언트와 연결
    5. 데이터 송수신
    6. 소켓 닫기
- 클라이언트
    1. 소켓 생성
    2. connect() 함수로 서버에 설정된 ip, port로 연결 시도
    3. 서버의 accept()로 클라이언트의 socket discriptor 반환
    4. 데이터 송수신
    5. 소켓 닫기.